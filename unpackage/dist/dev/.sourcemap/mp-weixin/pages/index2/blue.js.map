{"version":3,"sources":["uni-app:///main.js","webpack:///E:/project_uniapp/weight/pages/index2/blue.vue?e64c","webpack:///E:/project_uniapp/weight/pages/index2/blue.vue?a423","webpack:///E:/project_uniapp/weight/pages/index2/blue.vue?0cb4","webpack:///E:/project_uniapp/weight/pages/index2/blue.vue?1c3b","uni-app:///pages/index2/blue.vue","webpack:///E:/project_uniapp/weight/pages/index2/tooth.vue?76ba","webpack:///E:/project_uniapp/weight/pages/index2/tooth.vue?45ef","webpack:///E:/project_uniapp/weight/pages/index2/tooth.vue?1100","webpack:///E:/project_uniapp/weight/pages/index2/tooth.vue?6197","uni-app:///pages/index2/tooth.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,2F;AACAA,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;;;AAGnD;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA8lB,CAAgB,wnBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;ACOlnB,gF;;;;;;eAEA,EACA,IADA,kBACA,CACA;AAGA,GALA;AAMA,aANA;;;AASA,QATA,kBASA,GATA,EASA;AACA;AACA,GAXA,E;;;;;;;;;;;;ACTA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;;;AAGpD;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA+lB,CAAgB,ynBAAG,EAAC,C;;;;;;;;;;;;;;;;;ACKnnB;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBADA;AAEA;AACA;AACA,GAJA;;AAMA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAJA;AAKA;AACA;AACA,sBADA;AAEA,sBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SANA;AAOA;AACA,KApBA;;AAsBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BADA;AAEA;AACA;AACA;AACA;AACA,KANA;;AAQA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KATA;AAUA,GAXA;AAYA;;;AAGA;AACA;AACA;AACA,sBADA;AAEA;AACA;AACA;AACA,KALA;AAMA;AACA;AACA,KARA;;AAUA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wBADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAVA;;AAYA,GAbA,EAaA,IAbA;AAcA;;AAEA;AACA;AACA;AACA;AACA,sBADA;AAEA,wBAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BADA;AAEA,gCAFA;AAGA,uCAHA;AAIA,uBAJA;AAKA;AACA;AACA;AACA,aARA;;AAUA;AACA;AACA,KAnCA;AAoCA,QApCA,gBAoCA,GApCA,EAoCA;AACA;AACA,KAtCA;;;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CADA;AAEA,2CAFA;;AAIA,KALA,MAKA;AACA;AACA,6CADA;AAEA,2CAFA;;AAIA;;AAEA;;AAEA;AACA,GApBA;;AAsBA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,+CAFA,CAEA;AACA;AACA;AACA;AACA;AACA,uBADA;AAEA,qDAFA;AAGA,uCAHA;AAIA,iBAJA;AAKA;AACA;AACA,KAPA;AAQA;AACA;AACA,KAVA;;AAYA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,uBADA;AAEA,qDAFA;AAGA,uCAHA;AAIA,iBAJA;AAKA;AACA;AACA,KAPA;AAQA;AACA;AACA,KAVA;;AAYA;;AAEA;AACA;AACA;AACA,WADA,mBACA,GADA,EACA;AACA;AACA,KAHA;;AAKA,C;;;AAGA;AACA,MADA,kBACA;AACA;;;AAGA,GALA;AAMA,aANA;;;AASA,6CATA;AAUA,2DAVA;AAWA,uEAXA,E","file":"pages/index2/blue.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index2/blue.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./blue.vue?vue&type=template&id=06a69200&\"\nvar renderjs\nimport script from \"./blue.vue?vue&type=script&lang=js&\"\nexport * from \"./blue.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index2/blue.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./blue.vue?vue&type=template&id=06a69200&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./blue.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./blue.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\n\t\t\n\t</view>\n</template>\n \n<script>\n\timport bt from './tooth.vue'\n\t\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\t\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\t\n\t\t},\n\t\tonLoad(opt) {\n\t\t\tbt.openBluetoothAdapter(\"HM-C2-S\");\n\t\t}\n\t}\n</script>\n \n<style>\n","import { render, staticRenderFns, recyclableRender, components } from \"./tooth.vue?vue&type=template&id=1ca16a12&\"\nvar renderjs\nimport script from \"./tooth.vue?vue&type=script&lang=js&\"\nexport * from \"./tooth.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index2/tooth.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./tooth.vue?vue&type=template&id=1ca16a12&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./tooth.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./tooth.vue?vue&type=script&lang=js&\"","<template>\n\t<view></view>\n</template>\n \n<script>\n\tvar _discoveryStarted = false;\n\t\n\tvar _deviceId = null;\n\tvar _serviceId = null;\n\tvar _characteristicId = null;\n\tvar chs = [];\n\t\n\tvar btvalue = null;\n\t\n\tfunction inArray(arr, key, val) {\n\t  for (let i = 0; i < arr.length; i++) {\n\t    if (arr[i][key] === val) {\n\t      return i;\n\t    }\n\t  }\n\t  return -1;\n\t}\n\t// ArrayBuffer转16进度字符串示例\n\tfunction ab2hex(buffer) {\n\t  var hexArr = Array.prototype.map.call(\n\t    new Uint8Array(buffer),\n\t    function (bit) {\n\t      return ('00' + bit.toString(16)).slice(-2)\n\t    }\n\t  )\n\t  return hexArr.join('');\n\t}\n\t\n\t//准备开始扫描\n\tfunction $openBluetoothAdapter(devicename){\n\t\t//初始化蓝牙模块\n\t\tuni.openBluetoothAdapter({\n\t\t\tsuccess: (res) => {\n\t\t\t    console.log('openBluetoothAdapter success', res);\n\t\t\t    $startBluetoothDevicesDiscovery(devicename);\n\t\t\t},\n\t\t\tfail: (res) => {\n\t\t\t\tuni.showToast({\n\t\t\t\t    title: '请打开蓝牙',\n\t\t\t\t    duration: 1000\n\t\t\t\t});\n\t\t\t    if (res.errCode === 10001) {\n\t\t\t\t\t//监听蓝牙适配器状态变化事件\n\t\t\t\t\tuni.onBluetoothAdapterStateChange(function(res){\n\t\t\t\t\t\tconsole.log('onBluetoothAdapterStateChange', res);\n\t\t\t\t\t\tif (res.available) {\n\t\t\t\t\t\t\t//开始扫描\n\t\t\t\t\t\t\t$startBluetoothDevicesDiscovery(devicename)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t    }\n\t\t\t}\n\t\t})\n\t}\n\t\n\tfunction $startBluetoothDevicesDiscovery(devicename){\n\t\tif (_discoveryStarted) {\n\t\t    return;\n\t\t}\n\t\t_discoveryStarted = true;\n\t\t//开始搜寻附近的蓝牙外围设备\n\t\tuni.startBluetoothDevicesDiscovery({\n\t\t\tallowDuplicatesKey: true,\n\t\t\t    success: (res) => {\n\t\t\t    console.log('startBluetoothDevicesDiscovery success', res);\n\t\t\t\t//监听寻找到新设备的事件\n\t\t\t    $onBluetoothDeviceFound(devicename)\n\t\t\t},\n\t\t})\n\t}\n\t\n\tfunction $onBluetoothDeviceFound(devicename) {\n\t\t//监听寻找到新设备的事件\n\t\tuni.onBluetoothDeviceFound(function(res){\n\t\t\tres.devices.forEach(device => {\n\t\t\t\tif (!device.name && !device.localName) {\n\t\t\t\t  return;\n\t\t\t\t}\n\t\t\t\tconsole.log(device);\n\t\t\t\t//如果名字相同连接设备\n\t\t\t\tif(device.name == devicename){\n\t\t\t\t\t$createBLEConnection(device.deviceId);\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t}\n\t\n\t\n\tfunction $createBLEConnection(deviceId){\n\t\t//创建连接\n\t\tuni.createBLEConnection({\n\t\t\tdeviceId:deviceId,\n\t\t\tsuccess: (res) => {\n\t\t\t\tconsole.log(res);\n\t\t\t\t$getBLEDeviceServices(deviceId);\n\t\t\t},\n\t\t\tfail: (err) =>{\n\t\t\t\tconsole.log(err);\n\t\t\t}\n\t\t});\n\t\t$stopBluetoothDevicesDiscovery();\n\t}\n\t\n\tfunction $getBLEDeviceServices(deviceId) {\n\t\t//获取蓝牙设备所有服务(service)\r\n\t\tconsole.log('获取所有设备服务:'+ deviceId)\r\n\t\tsetTimeout(()=>{\r\n\t\t\tuni.getBLEDeviceServices({\r\n\t\t\t\tdeviceId,\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t  // for (let i = 0; i < res.services.length; i++) {\r\n\t\t\t\t    // if (res.services[i].isPrimary) {\r\n\t\t\t\t      $getBLEDeviceCharacteristics(deviceId, res.services[1].uuid);\r\n\t\t\t\t\t  // return;\r\n\t\t\t\t    // }\r\n\t\t\t\t  // }\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},1500)\n\t}\n\t\n\tfunction $getBLEDeviceCharacteristics(deviceId, serviceId){\n\t\t//获取蓝牙设备某个服务中所有特征值(characteristic)。\r\n\t\tconsole.log('设备号:'+deviceId+'服务号：'+serviceId)\n\t\tuni.getBLEDeviceCharacteristics({\n\t\t\tdeviceId,\n\t\t\tserviceId,\n\t\t\tsuccess: (res) => {\n\t\t\t\tconsole.log('getBLEDeviceCharacteristics success', res.characteristics);\n\t\t\t\tfor (let i = 0; i < res.characteristics.length; i++) {\n\t\t\t\t    let item = res.characteristics[i]\n\t\t\t\t  //   if (item.properties.read) {\n\t\t\t\t\t\t// //读取低功耗蓝牙设备的特征值的二进制数据值。1\n\t\t\t\t\t\t// uni.readBLECharacteristicValue({\n\t\t\t\t\t\t// \tdeviceId,\n\t\t\t\t\t\t// \tserviceId,\n\t\t\t\t\t\t// \tcharacteristicId: item.uuid,\n\t\t\t\t\t\t// })\n\t\t\t\t  //   }\n\t\t\t\t    if (item.properties.write) {\n\t\t\t\t        _deviceId = deviceId;\n\t\t\t\t        _serviceId = serviceId;\n\t\t\t\t        _characteristicId = item.uuid;\n\t\t\t\t        $writeBLECharacteristicValue();\n\t\t\t\t    }\n\t\t\t\t    if (item.properties.notify || item.properties.indicate) {\n\t\t\t\t\t\t//启用低功耗蓝牙设备特征值变化时的 notify 功能，订阅特征值。\n\t\t\t\t\t\tuni.notifyBLECharacteristicValueChange({\n\t\t\t\t            deviceId,\n\t\t\t\t            serviceId,\n\t\t\t\t            characteristicId: item.uuid,\n\t\t\t\t            state: true,\r\n\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\tconsole.log('开启监听')\r\n\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t},\n\t\t\t\t        });\n\t\t\t\t    }\n\t\t\t\t}\n\t\t\t},\n\t\t\tfail(res) {\n\t\t\t    console.error('getBLEDeviceCharacteristics', res)\n\t\t\t}\n\t\t})\n\t\t\n\t\t//监听数据\n\t\t// 操作之前先监听，保证第一时间获取数据\n\t\tuni.onBLECharacteristicValueChange(function(characteristic){\r\n\t\t\tconst idx = inArray(chs, 'uuid', characteristic.characteristicId)\r\n\t\t\t// let array = Array.prototype.slice.call(new Uint8Array(characteristic.value));\r\n\t\t\t// console.log(array);\n\t\t\tconst data = {}\n\t\t\tif (idx === -1) {\n\t\t\t  data[`chs[${chs.length}]`] = {\n\t\t\t    uuid: characteristic.characteristicId,\n\t\t\t    value: ab2hex(characteristic.value)\n\t\t\t  }\n\t\t\t} else {\n\t\t\t  data[`chs[${idx}]`] = {\n\t\t\t    uuid: characteristic.characteristicId,\n\t\t\t    value: ab2hex(characteristic.value)\n\t\t\t  }\n\t\t\t}\n\t\t\t\n\t\t\tconsole.log(data);\n\t\t\t\n\t\t\tbtvalue = data;\n\t\t})\n\t\t\n\t}\n\t\n\t\n\tfunction $writeBLECharacteristicValue() {\r\n\t\tconsole.log('开始写入')\n\t\t// // 向蓝牙设备发送一个0x00的16进制数据\n\t\t// let buffer = new ArrayBuffer(1)\n\t\t// let dataView = new DataView(buffer)\n\t\t// dataView.setUint8(0, 0x61 | 0);\n\t\t\r\n\t\tlet result = \"0xF50x02AABB0000000000000000000000CRC\"\r\n\t\tlet len = (result.length) / 2;\r\n\t\tconst buffer = new ArrayBuffer(len);\r\n\t\t\r\n\t\t//数字算法\r\n\t\tfor (let n = 1; n <= len; n++) {\r\n\t\t\tlet str = result.substr(2 * n, 2);\r\n\t\t\tvar dataView = new DataView(buffer,n - 1);//第一个视图，从0开始\r\n\t\t\tdataView.setUint8(0, str);\r\n\t\t}\r\n\t\tconsole.log(_deviceId + '    '+ _characteristicId + '    ')\n\t\tuni.writeBLECharacteristicValue({\n\t\t      deviceId: _deviceId,\n\t\t      serviceId: \"0783B03E-8535-B5A0-7140-A304D2495CBA\",\n\t\t      characteristicId: _characteristicId,\n\t\t      value: buffer,\n\t\t      success: function(res){\n\t\t        console.log(res);\n\t\t      },\n\t\t      fail: function(res){\n\t\t        console.log(res);\n\t\t      }\n\t\t})\n\t};\n\t\r\n\tfunction strToHexCharCode(str) {\n\t　　if(str === \"\")\n\t　　　　return \"\";\n\t　　var hexCharCode = [];\n\t　　hexCharCode.push(\"0x\"); \n\t　　for(var i = 0; i < str.length; i++) {\n\t　　　　hexCharCode.push((str.charCodeAt(i)).toString(16));\n\t\t\tlet char = (str.charCodeAt(i)).toString(16);\n\t\t\t\n\t　　}\n\t　　return hexCharCode.join(\"\");\n\t}\n\tfunction $writeBLECharacteristicValueString(str) {\r\n\t\tconsole.log('开始写入字符串')\n\t\t// 向蓝牙设备发送16进制数据\n\t\tlet buffer = new ArrayBuffer(str.length);\n\t\tlet dataView = new DataView(buffer);\n\t\t\n\t\tfor (let i in str) {\n\t\t\tdataView.setUint8(i, str[i].charCodeAt() | 0);\n\t\t}\n\t\t\n\t\tuni.writeBLECharacteristicValue({\n\t\t      deviceId: _deviceId,\n\t\t      serviceId: \"0783B03E-8535-B5A0-7140-A304D2495CBA\",\n\t\t      characteristicId: _characteristicId,\n\t\t      value: buffer,\n\t\t      success: function(res){\n\t\t        console.log(res);\n\t\t      },\n\t\t      fail: function(res){\n\t\t        console.log(res);\n\t\t      }\n\t\t})\n\t};\n\t\n\tfunction $stopBluetoothDevicesDiscovery(){\n\t\t//关闭搜索\n\t\tuni.stopBluetoothDevicesDiscovery({\n\t\t\tsuccess(res) {\n\t\t\t\tconsole.log(res);\n\t\t\t}\n\t\t})\n\t}\n\t\n\t\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\t\n\t\t},\n\t\topenBluetoothAdapter: $openBluetoothAdapter,\n\t\twriteBLECharacteristicValue: $writeBLECharacteristicValue,\n\t\twriteBLECharacteristicValueString: $writeBLECharacteristicValueString\n\t}\n\t\n\t\n</script>\n \n<style>\n</style>"],"sourceRoot":""}